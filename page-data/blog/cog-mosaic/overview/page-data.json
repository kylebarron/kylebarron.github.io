{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/blog/cog-mosaic/overview","result":{"data":{"post":{"__typename":"MdxPost","slug":"/blog/cog-mosaic/overview","title":"Dynamic map tiling with Cloud-Optimized GeoTIFFs","date":"May 12th, 2020","tags":[{"name":"Cloud-optimized GeoTIFF","slug":"cloud-optimized-geo-tiff"},{"name":"Serverless","slug":"serverless"},{"name":"Map tiles","slug":"map-tiles"}],"description":"There's a new way to serve a basemap.","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Dynamic map tiling with Cloud-Optimized GeoTIFFs\",\n  \"date\": \"2020-05-12T00:00:00.000Z\",\n  \"slug\": \"/blog/cog-mosaic/overview\",\n  \"description\": \"There's a new way to serve a basemap.\",\n  \"tags\": [\"Cloud-optimized GeoTIFF\", \"Serverless\", \"Map tiles\"],\n  \"banner\": \"./awspds_readme_screenshot.png\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"58.333333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAADSElEQVQozy2SX2/bZBjFjeCCSaNdUjS4R1PXpe0GQhoTkzbarVW3bmvTrnOSJc1f23ESO3bsxE4cJ2mWJqVNu4VlMJSiwsaukZAYaDcILvkGyNIQH+Q5vAUe6dHzSq90dPQ7h/vLe02vfvmdHNWl6IZIu6qM570munoFB5aNh3YNB3YVXa0EW9TRyGpoKjZsrYNXP/6Kv/98jWxcI5lP40V/z+M6tR77bEEWq4gF4zisqfRt28awWsGzrouvWi72TBPtfAEdrYyWrMPJFNCydvB0/xCjJy+QTFqkqttIr8U9biOYpgQv4NpCjFwhQy8Hdfw0cOloy8Zhq4ahU0PfNPCoXMJB1UGbucuGRCQ3sthuPUGj3MWNxfsUCuvI3Et53IdXMjS/mEA0rJDEJ6itKBhYTMBU8aVTxm7JxOhBC98xt/u2g7pSh51WEV+XMNg7QjHfwNLcXbo6H8XHl+95nP+Cho+WHLq1pmEtKGJ1LUvRiIr1lSSauRyedWw873fwctTHwHH/5ddSLDiihnaxhtsrIuavRWh+IYFLV0IeNz1XxaerPfhmFApcLiASq2AzXECSFyHFZHR0E/uVMkbdNh7Vm+jpFkNgo6eWUIlLyEQE3OdFWl/NYOF6xOPGp3I4fV6lsbMSjU+mMDGt4OJVActLUYRWonA1C1bBwLBe/S9dgQmlVPQUA1XmUhcUmFmDyoKGOzc3Pe7kZJ5OTckYmxTwbkCgk2c1nJ5V6PpiHMEbYfww3MFO1cYXjOdD24UZV9GRNfQKOgzG0smzt27Q0LagJSSPGwuU4J/RyDej08R0Ab5AgXyBPJZvy1i/GcHnRgnfdBvsGnjs1tHWjitVw65SRKdQhByVWTdV6usazBQT9J/h6Z33L9IJf4D8kzGamC3ivQs5+mQui83VGDaWw/h+v4stndXI0fDb1008dhxs5ZhAOg85nEY5LlJDkGGnRI97g+OI+39PfRAk36wB/7RM41PH6cURvsXjgariqLeNp806/jis4edBDXoyh4qoQNvMoCtJpEZSyPGMIRsc75tvnSDfuSyNnVPBgqK3z+Rw/lIKoWUeQljAaLuPTGuAz9IOkpKLgV1Cv6RAT+WwJcpMMIO7dxLeP1tBEB9ZlJsHAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Dynamic tiling of Landsat data. Credit @_VincentS_\",\n    \"title\": \"Dynamic tiling of Landsat data. Credit @_VincentS_\",\n    \"src\": \"/static/9dc9a6ea73735f4c5e7014b96fc18db5/7d769/awspds_readme_screenshot.png\",\n    \"srcSet\": [\"/static/9dc9a6ea73735f4c5e7014b96fc18db5/5243c/awspds_readme_screenshot.png 240w\", \"/static/9dc9a6ea73735f4c5e7014b96fc18db5/ab158/awspds_readme_screenshot.png 480w\", \"/static/9dc9a6ea73735f4c5e7014b96fc18db5/7d769/awspds_readme_screenshot.png 960w\", \"/static/9dc9a6ea73735f4c5e7014b96fc18db5/da8b6/awspds_readme_screenshot.png 1000w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"h2\", {\n    \"id\": \"overview\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#overview\",\n    \"aria-label\": \"overview permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Overview\"), mdx(\"p\", null, \"There's a new way to serve a raster basemap.\"), mdx(\"p\", null, \"Historically, the barrier to entry of serving an image basemap was\\nquite high. You had have access to high quality satellite imagery, the compute\\npower to preprocess those images into the right format for the web, the storage\\ncapability to store all that data, and the server capability to handle spikes in\\ntraffic.\"), mdx(\"p\", null, \"All that has changed.\"), mdx(\"p\", null, \"With the advent of serverless computing, the Cloud-Optimized GeoTIFF (COG)\\nformat, and large public repositories of such data, serving map tiles from large\\ncollections of imagery is being democratized. It's now possible to serve tiles\\non demand from a collection of terabytes of imagery, quickly, cheaply, and\\neasily.\"), mdx(\"p\", null, \"In this post, I present an outline of this new ecosystem, and lay the groundwork\\nfor future blog posts where I put this theory into practice, and show how to\\nimplement these tools with existing, open data sets.\"), mdx(\"h2\", {\n    \"id\": \"cloud-optimized-geotiffs\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#cloud-optimized-geotiffs\",\n    \"aria-label\": \"cloud optimized geotiffs permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Cloud-Optimized GeoTIFFs\"), mdx(\"p\", null, \"As described on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.cogeo.org/\"\n  }), \"cogeo.org\"), \":\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"A Cloud Optimized GeoTIFF (COG) is a regular GeoTIFF file, aimed at being hosted on a HTTP file server, with an internal organization that enables more efficient workflows on the cloud. It does this by leveraging the ability of clients issuing \\u200BHTTP GET range requests to ask for just the parts of a file they need.\")), mdx(\"p\", null, \"This new format is at the core of dynamic tiling. By making use of its internal\\nimage \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"overviews\"), \", one can read \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"parts\"), \" of the image over a network roughly in\\nproportion to the amount of data requested. The client needs only to read the\\nfile's inital metadata to know the exact pattern and byte ranges of the rest of\\nthe file. Then to read an image's top-right corner at mid-resolution, a minimal\\nnumber of additional requests can be made just for that data.\"), mdx(\"p\", null, \"There are several large collections of publicly-available COG data, including:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://registry.opendata.aws/landsat-8/\"\n  }), \"Landsat 8\"), \": Worldwide, medium resolution multi-spectral imagery since 2013, with new scenes added daily.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://registry.opendata.aws/naip/\"\n  }), \"NAIP\"), \": High resolution (1-meter and 0.6-meter) true color \\\"leaf-on\\\" imagery for the continental 48 U.S. states, taken at regular intervals since 2011. Most states have been imaged four times since 2011.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://registry.opendata.aws/modis-astraea/\"\n  }), \"MODIS\"), \": Worldwide, low resolution multi-spectral imagery captured by the MODIS satellite.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://registry.opendata.aws/cbers/\"\n  }), \"CBERS\"), \": Medium resolution imagery captured by the China-Brazil Earth Resources Satellite. It doesn't have worldwide coverage, however.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.usgs.gov/core-science-systems/ngp/topo-maps/historical-topographic-map-collection?qt-science_support_page_related_con=0\"\n  }), \"USGS Historical Topographic Maps\"), \": 181,000 topographic maps, created between 1884 and 2006, covering U.S. territory. These files have been scanned, georeferenced, and saved in COG format in a public S3 bucket.\")), mdx(\"p\", null, \"NAIP, MODIS, and CBERS imagery is stored in requester-pays buckets, which means\\nthat the requester pays the cost of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET\"), \" request and the data transfer, but\\nas we'll see in future blog posts, this is a small cost as long as the tiler is\\nlocated in the same region as the data.\"), mdx(\"p\", null, \"Additionally, high-resolution USGS elevation data \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.usgs.gov/news/usgs-digital-elevation-models-dem-switching-new-distribution-format\"\n  }), \"is being\\nconverted\"), \" to COG, with expected launch in 2020, and there are\\nrumors that Sentinel 2 data may be available in COG in the future.\"), mdx(\"h2\", {\n    \"id\": \"mosaicjson\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#mosaicjson\",\n    \"aria-label\": \"mosaicjson permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"MosaicJSON\"), mdx(\"p\", null, \"It's great that all those terabytes of COG exist for public consumption, but you\\nstill need a way to select what portions of imagery to combine. That's where\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/developmentseed/mosaicjson-spec\"\n  }), \"MosaicJSON\"), \" comes in. It's a file that determines what source files\\nshould be merged to create each web mercator map tile.\"), mdx(\"p\", null, \"MosaicJSON files add flexibility to the system. I can switch combinations of\\nimagery by switching the MosaicJSON file that I pass to the tiler. For example,\\nI've generated a couple dozen MosaicJSON files representing cloudless Landsat 8\\ncombinations: one per season since 2013. It's then easy to expose image\\nselection options to the user by changing the MosaicJSON url to give to the\\ntiler. (Deeper explanation coming in future blog post).\"), mdx(\"h2\", {\n    \"id\": \"serverless-computing\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#serverless-computing\",\n    \"aria-label\": \"serverless computing permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Serverless Computing\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/Serverless_computing\"\n  }), \"Serverless computing\"), \" is the last part of the puzzle.\\nWith services like AWS Lambda, one can set up dynamic tiling for a hobby\\nproject, and never have to manage servers. AWS Lambda will scale up and down\\nwith demand. If your project generally receives little traffic, but once in a\\nwhile goes viral, you pay very little when you have no visitors, but are still\\nable to scale quickly to whatever level is necessary.\"), mdx(\"p\", null, \"To be clear, going serverless is not a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"necessary\"), \" part of the puzzle. If you\\nplan to serve map tiles at scale, it may be more performant or cheaper to\\nmaintain your own servers, but the maintainance overhead needs to be taken into\\naccount.\"), mdx(\"p\", null, \"At this stage, I plan to use dynamic tiling for hobby projects, and not having\\nto manage servers is a big plus.\"), mdx(\"p\", null, \"While serverless computing is sometimes more expensive than running and\\nmaintaining a server, serving tiles is still cheaper than some paid services. A\\nrough cost estimate for on-demand tiling of Landsat 8 data is $50 per million\\ntiles. As a comparison, once (if) you surpass Mapbox's (very generous) free\\ntier, their pricing is $0.25 per 1000 requests, or $250 per million.\\nFurthermore, I aggressively \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/blog/caching-lambda-functions-cloudflare\"\n  }), \"cache my Lambda responses with\\nCloudflare\"), \" to minimize the requests that reach the origin.\"), mdx(\"p\", null, \"But overall, part of the allure of dynamic tiling is the flexibility from being\\nable to choose \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"any\"), \" imagery on demand. You aren't restricted to what Mapbox\\nselects for their satellite basemap.\"), mdx(\"h2\", {\n    \"id\": \"ecosystem\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#ecosystem\",\n    \"aria-label\": \"ecosystem permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Ecosystem\"), mdx(\"p\", null, \"Over the last few months, and along with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/_vincents_\"\n  }), \"Vincent Sarago\"), \" and\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/geospatial-jeff\"\n  }), \"Jeff Albrecht\"), \", I've been helping to build out an ecosystem of\\nopen source tools to make dynamic tiling fast and reliable.\"), mdx(\"p\", null, \"There are several interrelated tools. It's easy to get them confused.\"), mdx(\"p\", null, \"Here's an overview of the ecosystem.\"), mdx(\"h3\", {\n    \"id\": \"rio-tiler\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#rio-tiler\",\n    \"aria-label\": \"rio tiler permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"rio-tiler\")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cogeotiff/rio-tiler\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"rio-tiler\")), \" is at the core of the ecosystem. It's a library whose\\nmain purpose is to create a mercator tile from a given input image. In contrast\\nto some of the following libraries, it takes a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"single\"), \" input path and returns a\\n\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"single\"), \" output image. It forms the core of some other libraries.\"), mdx(\"p\", null, \"With the \\\"standard\\\" tiler, you provide a path to a COG image and a standard\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"xyz\"), \" mercator tile, and it returns data for that mercator tile. Specifically,\\nit returns \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"two objects\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mask\"), \", which allow you to ascertain what\\nportions of the mercator tile are not covered by the source image. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler\"), \"\\nalso includes some \\\"mission-specific\\\" tilers for Landsat 8, Sentinel 1 and 2,\\nand CBERS. These allow you to pass an \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"identifier\"), \" to a satellite scene, and the\\ntiler will find the data corresponding to that scene on AWS S3.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"September 2020 update\"), \": With the upcoming \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler\"), \" v2.0 release,\\nmission-specific tilers have been refactored into a separate module,\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cogeotiff/rio-tiler-pds\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"rio-tiler-pds\")), \".\"), mdx(\"h3\", {\n    \"id\": \"rio-tiler-mosaic\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#rio-tiler-mosaic\",\n    \"aria-label\": \"rio tiler mosaic permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"rio-tiler-mosaic\")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cogeotiff/rio-tiler-mosaic\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"rio-tiler-mosaic\")), \" builds upon \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler\"), \" to work with\\nmultiple assets. It takes a list of assets that are \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"already known\"), \" to overlap\\nwith the tile, and combines them into an image aligned with a web mercator tile.\"), mdx(\"p\", null, \"This is a core difference between this and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cogeo-mosaic\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cogeo-mosaic-tiler\"), \":\\nsince \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler-mosaic\"), \" doesn't interact with the MosaicJSON directly,\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler-mosaic\"), \" doesn't know how to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"find\"), \" the right combination of assets to\\ntile together.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler-mosaic\"), \" takes a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"tiler\"), \" from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler\"), \" as an argument. This forms a\\nsimple plugin system, making it simple to create an image tile from either the\\nstandard tiler or a mission-specific tiler, such as the Landsat 8 tiler.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"September 2020 update\"), \": With the upcoming \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler\"), \" v2.0 release,\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler-mosaic\"), \" is merged into the main \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler\"), \" repository.\"), mdx(\"h3\", {\n    \"id\": \"cogeo-mosaic\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#cogeo-mosaic\",\n    \"aria-label\": \"cogeo mosaic permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"cogeo-mosaic\")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/developmentseed/cogeo-mosaic\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"cogeo-mosaic\")), \" is a Python library to create MosaicJSON files\\nand load such files from various \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"backends\"), \". In the upcoming 3.0 release, new\\nsupport exists for storing a MosaicJSON in a variety of locations, including in\\na DynamoDB table. For large mosaics, DynamoDB is significantly faster than\\nloading a JSON file from an S3 bucket.\"), mdx(\"h3\", {\n    \"id\": \"cogeo-mosaic-tiler\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#cogeo-mosaic-tiler\",\n    \"aria-label\": \"cogeo mosaic tiler permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"cogeo-mosaic-tiler\")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/developmentseed/cogeo-mosaic-tiler\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"cogeo-mosaic-tiler\")), \" wraps all of the above together. It's\\na python package and web server that depends on the above packages to serve\\ntiled imagery on demand, and is designed to be deployed on AWS Lambda.\"), mdx(\"p\", null, \"For example, the image endpoint essentially just loads a given MosaicJSON using\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cogeo-mosaic\"), \", using it to find asset identifiers for a specific mercator tile.\\nThen it passes those assets to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler-mosaic\"), \" using the standard tiler from\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rio-tiler\"), \". Those two packages then load each of the necessary assets,\\ncombining them into a single web mercator tile on the fly, returning it as an\\nimage to the user.\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/developmentseed/awspds-mosaic\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"awspds-mosaic\")), \" is a fork of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cogeo-mosaic-tiler\"), \" to support\\ndynamic tiling of Landsat 8 data stored on AWS as a public data set. Landsat 8\\nimagery has some custom needs because data are stored in individual bands that\\nneed to be combined into a single image.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"September 2020 update\"), \": \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cogeo-mosaic-tiler\"), \" is being superseded by\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/developmentseed/titiler\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"titiler\")), \", a newer dynamic tiling server that handles more use-cases\\nand has more varied options for deployment. I recommend titiler for all new\\ndeployments, as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cogeo-mosaic-tiler\"), \" is less likely to receive updates.\"), mdx(\"h3\", {\n    \"id\": \"rio-cogeo\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#rio-cogeo\",\n    \"aria-label\": \"rio cogeo permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"rio-cogeo\")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cogeotiff/rio-cogeo\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"rio-cogeo\")), \" is a library to facilitate \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"creating COGs\"), \". It's rare\\nthat I use it because I'm generally tiling COGs that already exist publicly on\\nS3, and thus I don't need to create new COGs.\"), mdx(\"h2\", {\n    \"id\": \"references\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#references\",\n    \"aria-label\": \"references permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"References\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://medium.com/devseed/cog-talk-part-1-whats-new-941facbcd3d1\"\n  }), \"COG talk\"), \", a great, insightful series on the Cloud-Optimized GeoTIFF format, MosaicJSON, and dynamic tiling.\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Overview There's a new way to serve a raster basemap. Historically, the barrier to entry of serving an image basemap was\nquite high. You hadâ€¦","timeToRead":6,"banner":{"childImageSharp":{"resize":{"src":"/static/9dc9a6ea73735f4c5e7014b96fc18db5/73f08/awspds_readme_screenshot.png"}}}}},"pageContext":{"slug":"/blog/cog-mosaic/overview","formatString":"MMMM Do, YYYY"}},"staticQueryHashes":["3090400250","3090400250","318001574"]}